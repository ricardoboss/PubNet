@page "/browse/authors"
@inject ApiClient Http

<PageTitle>Authors</PageTitle>

@if (_authors == null)
{
	<Paragraph>
		<em>Loading...</em>
	</Paragraph>
}
else
{
	<Table>
		<TableHeader>
			<TableRow>
				<TableHeaderCell>Username</TableHeaderCell>
				@* <TableHeaderCell># of packages</TableHeaderCell> *@
				<TableHeaderCell>Joined</TableHeaderCell>
			</TableRow>
		</TableHeader>
		<TableBody>
		@if (!_authors.Authors.Any())
		{
			<TableRow>
				<TableRowCell colspan="4" TextAlignment="TextAlignment.Center">
					<strong>No authors found.</strong>
				</TableRowCell>
			</TableRow>
		}
		else
		{
			<Repeater Items="_authors.Authors.OrderByDescending(a => a.UserName)">
				<TableRow>
					<TableRowCell>
						<NavLink href="@("/authors/" + context.UserName)">@context.UserName</NavLink>
					</TableRowCell>
					@* <TableRowCell>@context.NumPackagesUploaded</TableRowCell> *@
					<TableRowCell>
						<Abbreviation Title="@(context.RegisteredAtUtc.ToString())">@context.RegisteredAtUtc.Humanize()</Abbreviation>
					</TableRowCell>
				</TableRow>
			</Repeater>
		}
		</TableBody>
	</Table>
}

@code {
	private AuthorListDto? _authors;

	protected override async Task OnParametersSetAsync()
	{
		_authors = await Http.Authors.Search.GetAsync();
	}

}
