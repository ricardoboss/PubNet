@page "/"

@code {

	private RegistrationsOpen? registrationsOpen;

}

<PageTitle>PubNet</PageTitle>

<AuthorizeView>
	<Authorized>
		<MudStack>
			<h1>Hello, @context.User.Identity!.Name!</h1>

			<LogoutForm/>
		</MudStack>
	</Authorized>
	<NotAuthorized>
		<MudStack Spacing="4">
			<h1>Hello, anonymous!</h1>

			<LoginForm/>

			<RegistrationsOpen @ref="registrationsOpen">
				<Loading>
					<MudAlert Severity="Severity.Info">
						Loading registrations status...
					</MudAlert>
				</Loading>
				<Open>
					<RegisterForm/>
				</Open>
				<Error>
					<MudAlert Severity="Severity.Error">
						Could not determine if registrations are open.

						@if (registrationsOpen is not null)
						{
							<a href="#" @onclick="registrationsOpen.ReloadRegistrationsStatus">Retry</a>
						}
					</MudAlert>
				</Error>
			</RegistrationsOpen>
		</MudStack>
	</NotAuthorized>
	<Authorizing>
		<h1>Hello, please wait...</h1>
	</Authorizing>
</AuthorizeView>
